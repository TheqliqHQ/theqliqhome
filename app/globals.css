@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------------------------------------------------------
   Font (hosted): Open Sans – used everywhere including hero
   --------------------------------------------------------- */
@import url("https://fonts.googleapis.com/css2?family=Open+Sans:wght@300..800&display=swap");

/* =========================================================
   CSS Custom Props
   ========================================================= */
:root {
  /* Primary sans (Google Sans unavailable from CDN) */
  --brand-sans: "Open Sans", Inter, system-ui, -apple-system, "Segoe UI",
    Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;

  /* Stage colors (background behind deck/hero) */
  --stage-bg: #0e4fd3; /* blue you’re using */
  --stage-fg: #ffffff;
}

/* =========================================================
   Base layout
   ========================================================= */
html, body, :root {
  height: 100%;
  min-height: 100%;
}

body {
  font-family: var(--brand-sans);
  background: var(--stage-bg);
  color: var(--stage-fg);
  overflow-x: hidden;  /* never horizontal scroll globally */
}

/* Keep fixed items from getting clipped by transforms */
.fixed-escape { transform: none !important; will-change: auto; }

/* =========================================================
   SCROLL MODES
   ========================================================= */

/* Story mode (card deck): full-screen, no scroll */
body[data-mode="story"] {
  height: 100svh;
  overflow: hidden !important;
}

/* Grid mode (content pages): normal scroll */
body[data-mode="grid"] {
  height: auto;
  overflow-y: auto !important;
  overflow-x: hidden;
  scroll-behavior: smooth;
}

/* When a hero/detail page is open:
   - Body remains the single scroller
   - Hide footer/toggle while in detail
*/
body[data-detail="open"] {
  overflow-y: auto !important;   /* the ONLY scrollbar */
}
body[data-detail="open"] footer,
body[data-detail="open"] .toggle-dock {
  display: none !important;
}

/* Prevent nested scroll areas inside the detail layer */
.detail-layer,
.detail-layer * {
  overscroll-behavior: contain;
}
.detail-layer .detail-viewport {
  overflow: visible !important;
}

/* =========================================================
   Header/Footer layering and behavior
   ========================================================= */
header, footer { z-index: 100; }

/* In grid mode, let header/footer scroll with the page */
body[data-mode="grid"] .app-header,
body[data-mode="grid"] .app-footer {
  position: static !important;
  inset: auto !important;
  z-index: 20 !important;
}

/* Deck in grid mode should be in normal flow */
body[data-mode="grid"] .deck-layer {
  position: static !important;
  inset: auto !important;
  z-index: auto !important;
}

/* Optional breathing room for first deck section in grid mode */
body[data-mode="grid"] .deck-layer > section:first-child {
  margin-top: 1.5rem;
  margin-bottom: 2rem;
}

/* Detail: keep header initially visible, allow fade/hide toggle */
body[data-detail="open"][data-header="hide"] header {
  opacity: 0;
  transform: translateY(-12px);
  pointer-events: none;
  transition: opacity 180ms ease, transform 180ms ease;
}
body[data-detail="open"][data-header="show"] header {
  opacity: 1;
  transform: translateY(0);
  transition: opacity 180ms ease, transform 180ms ease;
}

/* When sentinel marks end of content, footer can reappear (utility class) */
body.detail-footer-show .site-footer { display: block !important; }

/* =========================================================
   Stage helper (full-bleed background)
   ========================================================= */
.stage { @apply h-screen w-screen overflow-hidden; }
.stage { background: var(--stage-bg); color: var(--stage-fg); }

/* =========================================================
   Type helpers
   ========================================================= */
.brand-subtitle {
  font-family: var(--brand-sans);
  font-weight: 500;
  font-size: 16px;
  line-height: 28px;
  color: #fff;
}

/* CTA “Next card / Show me!” */
.cta-text { @apply text-white font-bold text-[36px] leading-[44px]; }

/* =========================================================
   Card surfaces (no shadows)
   ========================================================= */
.rounded-card { border-radius: 28px; }

.paper-grain {
  background-image: radial-gradient(rgba(0,0,0,0.025) 1px, transparent 1px);
  background-size: 3px 3px;
}
.paper-surface {
  background-color: #fff;
  border: 1px solid rgba(0,0,0,0.08);
  box-shadow: none;
}
.paper-back {
  background-color: #fff;
  border: 1px solid rgba(0,0,0,0.10);
  box-shadow: none;
  filter: none;
  opacity: 0.96;
}

/* =========================================================
   HERO — shared look for every hero file
   ========================================================= */

/* Ensure all hero content inherits the same font */
.hero-title,
.hero-scope,
.hero-scope * {
  font-family: var(--brand-sans) !important;
}

/* Title spec: 60/72, rgb(32,33,36) */
.hero-title {
  font-weight: 400;
  font-style: normal;
  font-size: 60px;
  line-height: 72px;
  color: rgb(32, 33, 36);
  letter-spacing: 0;
  margin: 0;
  max-width: 20ch;
}
@media (max-width: 1200px) {
  .hero-title {
    font-size: clamp(36px, 6vw, 60px);
    line-height: clamp(42px, 7.2vw, 72px);
  }
}

/* Hero grid layout: text left, art right (room for 424px image) */
.hero-grid {
  display: grid;
  grid-template-columns: 1fr 460px;
  align-items: center;
  gap: 32px;
}
@media (max-width: 1024px) {
  .hero-grid { grid-template-columns: 1fr; gap: 24px; }
  .hero-right { justify-self: start; }
}
.hero-right { display: flex; align-items: center; justify-content: flex-start; }

/* Image constraints: 424 × 570.5 */
.hero-figure {
  width: 424px;
  height: 570.5px;  /* 570.47 rounded */
  object-fit: contain;
  display: block;
}

/* Art frame is transparent so hero files never add an extra “white box” */
.hero-art-frame {
  width: 100%;
  aspect-ratio: 1/1;
  display: grid;
  place-items: center;
  overflow: hidden;
  border-radius: 24px;
  background: transparent !important;
}
.hero-art-frame img,
.hero-art-frame svg,
.hero-art-frame video,
.hero-art-frame canvas {
  max-width: 100%;
  max-height: 100%;
  height: auto;
  object-fit: contain;
}

/* Chip appearance (color is set inline per card theme) */
.hero-chip { box-shadow: 0 1px 0 rgba(0,0,0,.04); }

/* Close button: always black circle with white “×” */
.hero-close {
  display: inline-grid;
  place-items: center;
  width: 44px;
  height: 44px;
  border-radius: 9999px;
  background: #000;     /* never inherits stage bg */
  color: #fff;
  border: 1px solid rgba(255,255,255,0.15);
}
.hero-close:focus-visible {
  outline: 2px solid #fff;
  outline-offset: 2px;
}

/* =========================================================
   Small responsive touches
   ========================================================= */
html, body { overflow-x: hidden; } /* extra safety */
